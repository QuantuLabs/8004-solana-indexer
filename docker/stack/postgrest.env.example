# ============================================================
# Optional PostgREST Sidecar (Local PostgreSQL)
# ============================================================
#
# Use with docker/stack/indexer-stack.postgrest.yml:
# docker compose --env-file .env --env-file .env.postgrest \
#   -f docker/stack/indexer-stack.yml \
#   -f docker/stack/indexer-stack.postgrest.yml \
#   --profile postgrest up -d

# Indexer REST proxy wiring (alias env supported by indexer)
POSTGREST_URL=http://postgrest:3000
# JWT signed with PGRST_JWT_SECRET and containing role = PGRST_DB_ANON_ROLE
POSTGREST_TOKEN=replace-with-jwt-token

# PostgREST container
POSTGREST_IMAGE=postgrest/postgrest:v12.2.8
POSTGREST_PORT=3002

# PostgreSQL DSN (from PostgREST container perspective)
# Docker Desktop (macOS/Windows): host.docker.internal points to host
PGRST_DB_URI=postgres://postgres:postgres@host.docker.internal:5432/indexer

# PostgREST configuration
PGRST_DB_SCHEMAS=public
PGRST_DB_EXTRA_SEARCH_PATH=public
PGRST_DB_ANON_ROLE=web_anon
PGRST_JWT_SECRET=replace-with-random-secret
PGRST_LOG_LEVEL=info
